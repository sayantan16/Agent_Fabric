{% extends "base.html" %} {% block title %}Registry - {{ app_name }}{% endblock
%} {% block content %}
<div class="h-full flex flex-col">
  <!-- Registry Header -->
  <div class="bg-white border-b border-gray-200 p-6 flex-shrink-0">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-bold text-gray-900">Component Registry</h1>
        <p class="text-gray-600 mt-1">
          Explore available agents and tools in the system
        </p>
      </div>
      <div class="flex items-center space-x-6">
        <div class="text-center">
          <div class="text-2xl font-bold text-blue-600">
            {{ registry_stats.statistics.total_agents or 0 }}
          </div>
          <div class="text-sm text-gray-500">Agents</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-green-600">
            {{ registry_stats.statistics.total_tools or 0 }}
          </div>
          <div class="text-sm text-gray-500">Tools</div>
        </div>
        <div class="text-center">
          <div class="text-2xl font-bold text-purple-600">
            {{ registry_stats.summary.health_score or 0 }}%
          </div>
          <div class="text-sm text-gray-500">Health</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Filters and Search -->
  <div class="bg-gray-50 border-b border-gray-200 p-4 flex-shrink-0">
    <div class="flex items-center space-x-4">
      <div class="flex-1">
        <input
          type="text"
          placeholder="Search agents and tools..."
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
      <button
        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
      >
        Apply Filters
      </button>
      <button class="text-gray-600 hover:text-gray-800">Clear</button>
    </div>
  </div>

  <!-- Content Area with Proper Scrolling -->
  <div class="flex-1 overflow-auto">
    <div class="p-6">
      <!-- Agents Section -->
      <div class="mb-8">
        <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
          <span class="bg-blue-100 text-blue-600 px-2 py-1 rounded text-sm mr-2"
            >A</span
          >
          Agents {{ agents|length }}
        </h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
          {% for agent in agents %}
          <div
            class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow"
          >
            <div class="flex items-start justify-between mb-4">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center text-white font-medium text-sm"
                >
                  {{ agent.name[:2].upper() }}
                </div>
                <div class="ml-3">
                  <h3 class="font-medium text-gray-900">
                    {{ agent.name.replace('_', ' ').title() }}
                  </h3>
                  <span class="text-xs text-gray-500"
                    >{{ 'Prebuilt' if agent.is_prebuilt else 'Generated'
                    }}</span
                  >
                </div>
              </div>
            </div>

            <p class="text-sm text-gray-600 mb-4">{{ agent.description }}</p>

            <div class="space-y-2">
              <div class="flex items-center text-sm">
                <span class="text-gray-500">ðŸ”§ Tools Used</span>
              </div>
              {% if agent.uses_tools %} {% for tool in agent.uses_tools %}
              <span
                class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded"
                >{{ tool }}</span
              >
              {% endfor %} {% else %}
              <span class="text-xs text-gray-400">No tools</span>
              {% endif %}
            </div>

            <div
              class="mt-4 pt-4 border-t border-gray-100 flex items-center justify-between text-sm"
            >
              <div class="flex items-center space-x-4">
                <span class="text-gray-500"
                  >{{ agent.execution_count or 0 }} Executions</span
                >
                <span class="text-gray-500"
                  >{{ "%.1f"|format(agent.avg_execution_time or 0) }}s Avg
                  Time</span
                >
              </div>
              <button class="text-blue-600 hover:text-blue-800">
                View Details
              </button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Tools Section -->
      <div>
        <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
          <span
            class="bg-green-100 text-green-600 px-2 py-1 rounded text-sm mr-2"
            >T</span
          >
          Tools {{ tools|length }}
        </h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
          {% for tool in tools %}
          <div
            class="bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow"
          >
            <div class="flex items-start justify-between mb-4">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center text-white font-medium text-sm"
                >
                  {{ tool.name[:2].upper() }}
                </div>
                <div class="ml-3">
                  <h3 class="font-medium text-gray-900">
                    {{ tool.name.replace('_', ' ').title() }}
                  </h3>
                  <span class="text-xs text-gray-500"
                    >{{ 'Prebuilt' if tool.is_prebuilt else 'Generated' }}</span
                  >
                </div>
              </div>
            </div>

            <p class="text-sm text-gray-600 mb-4">{{ tool.description }}</p>

            <div class="space-y-2">
              <div class="flex items-center text-sm">
                <span class="text-gray-500">ðŸ‘¥ Used By</span>
              </div>
              {% if tool.used_by_agents %} {% for agent in tool.used_by_agents
              %}
              <span
                class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded"
                >{{ agent }}</span
              >
              {% endfor %} {% else %}
              <span class="text-xs text-gray-400">Unused</span>
              {% endif %}
            </div>

            <div
              class="mt-4 pt-4 border-t border-gray-100 flex items-center justify-between text-sm"
            >
              <span class="text-gray-500"
                >{{ tool.line_count or 0 }} Lines</span
              >
              <button class="text-blue-600 hover:text-blue-800">
                View Details
              </button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
